<!DOCTYPE html>
<html lang="zh-TW">
<meta charset="utf-8"/>
<title>密碼測試頁</title>
<div style="max-width:320px;margin:40px auto;padding:20px;border:1px solid #ccc;border-radius:8px">
  <h3>請輸入密碼</h3>
  <input type="password" id="pwd" placeholder="Password" style="width:100%;padding:8px">
  <button id="unlock" style="margin-top:8px;width:100%;padding:8px">進入</button>
  <div id="msg" style="color:#d32f2f;margin-top:6px;min-height:1.2em"></div>
</div>
<script>
const PASSWORD_HASH = "03ac674216f3e15c761ee1a5e255f067953623c8b388b4459e13f978d7c846f4"; // "1234"

async function sha256Hex(text){
  const enc = new TextEncoder().encode(text);
  const buf = await crypto.subtle.digest("SHA-256", enc);
  return Array.from(new Uint8Array(buf)).map(b=>b.toString(16).padStart(2,"0")).join("");
}

async function tryUnlock(){
  const pwd = document.getElementById('pwd').value;
  const msg = document.getElementById('msg');
  msg.textContent = "";
  try{
    const hash = await sha256Hex(pwd);
    if(hash===PASSWORD_HASH){ alert("✅ 解鎖成功"); }
    else{ msg.textContent = "密碼錯誤"; }
  }catch(e){
    console.error(e);
    msg.textContent = "執行錯誤，請確認是 HTTPS 或瀏覽器版本";
  }
}
document.getElementById('unlock').addEventListener('click', tryUnlock);
document.getElementById('pwd').addEventListener('keydown', e=>{ if(e.key==="Enter") tryUnlock(); });
</script>
